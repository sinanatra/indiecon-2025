import{s as E,n as x,d as $,i as S,b as C,f as L,h as P,j as k,w as T}from"../chunks/CN3D1VmF.js";import{S as z,i as D,d as F,t as I,a as N,m as R,c as W,b as j}from"../chunks/ClFM_-_F.js";import{P as q}from"../chunks/B5-_xxuh.js";function U(r){let a,s,i;return s=new q({props:{sketch:r[1]}}),{c(){a=k("div"),j(s.$$.fragment),this.h()},l(e){a=L(e,"DIV",{class:!0});var o=P(a);W(s.$$.fragment,o),o.forEach($),this.h()},h(){C(a,"class","viz-container svelte-uwqq1k")},m(e,o){S(e,a,o),R(s,a,null),r[2](a),i=!0},p:x,i(e){i||(N(s.$$.fragment,e),i=!0)},o(e){I(s.$$.fragment,e),i=!1},d(e){e&&$(a),F(s),r[2](null)}}}const A="DDSWUW-YEQB3S-EEJPFN-45Y0",H=2,K=52,M=24e4,v=3e3;function Y(r,a,s){let i,e={lat:53.5511,lon:9.9937},o=[],l=0,c=null,d=0,u=0,m=0,f=!1;function _(){return new Promise(t=>{navigator.geolocation.getCurrentPosition(n=>{t({lat:n.coords.latitude,lon:n.coords.longitude})},n=>{console.warn("Geolocation error:",n.message),t(e)})})}async function g(){const{lat:t,lon:n}=e,p=`https://api.n2yo.com/rest/v1/satellite/above/${t}/${n}/0/${H}/${K}/&apiKey=${A}`;try{const h=await(await fetch(p)).json();console.log(h),h.above&&h.above.length>0&&(o=h.above,l=0,f=!1,console.log("Loaded",o.length,"satellites"))}catch(w){console.error("Error fetching satellites:",w)}}let y=t=>{t.setup=async()=>{t.createCanvas(window.innerWidth,window.innerHeight),e=await _(),await g(),u=performance.now(),m=performance.now()},t.draw=()=>{const n=performance.now();n-u>M&&f&&(g(),u=n),!f&&n-m>v&&o.length>0&&l<o.length&&(c=o[l].satname,d=n+v,l++,m=n,l>=o.length&&(f=!0)),t.background(c&&n<d?[255,0,0]:0),t.fill(c&&n<d?0:255),t.textSize(24),t.textAlign(t.LEFT,t.TOP),t.text(`Satellites found: ${o.length}
Location: ${e.lat.toFixed(4)}, ${e.lon.toFixed(4)}`,20,20),c&&n<d&&(t.textAlign(t.CENTER,t.CENTER),t.textSize(150),t.text(`${c}`,t.width/2,t.height/2))},t.windowResized=()=>{t.resizeCanvas(window.innerWidth,window.innerHeight)}};function b(t){T[t?"unshift":"push"](()=>{i=t,s(0,i)})}return[i,y,b]}class O extends z{constructor(a){super(),D(this,a,Y,U,E,{})}}export{O as component};
